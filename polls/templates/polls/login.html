<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>login</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'polls/dist/css/login.css' %}">
    <link rel="stylesheet" href="{% static 'polls/dist/css/reset.css' %}">
  </head>
  <body>
    <div class="form_box">
      <h2>欢迎登陆</h2>
      <form class="" action="index.html" method="post">
        {%csrf_token%}
        <div class="item">
          <label for="name">名称：</label>
          <input type="text" name="name" value="">
        </div>
        <div class="item">
          <label for="password">密码：</label>
          <input type="password" name="password" value="">
        </div>
        <input id="submit" type="button" name="" value="登陆">
        <a href="/polls/register">注册</a>
      </form>
    </div>

    <script type="text/javascript" src="{%static 'polls/dist/js/jquery-3.3.1.js'%}"></script>
    <script type="text/javascript">
      $(function(){
        $('#submit').on('click', function(){
          $.ajax({
            type:"POST",
            url:"/polls/login",
            data: $('form').serialize(),
            success: function(data){
              if(data.status==1){
                console.log(data.info);
                window.location.href=data.url;
              }else{
                alert(data.info);
              }
            }
          })
        })
      })
    </script>
  </body>
</html>
